# 软件安全实验7

**姓名：何叶  学号：2313487  班级：范玲玲班**

## 实验名称：AFL模糊测试实验

## 实验要求：

实验要求：
根据课本7.4.5章节，复现AFL在KALI下的安装、应用，查阅资料理解覆盖引导和文件变异的概念和含义。

## 实验背景

AFL 是一款基于覆盖引导（Coverage-Guided）的模糊测试工具，它通过记录输入样本的代码覆盖率，从而调整输入样本以提高覆盖率，增加发现漏洞的概率。AFL 主要用于 C/C++程序的测试，被测程序有无程序源代码均可，有源代码时可以对源代码进行编译时插桩，无源代码时可以借助 QEMU 的用户模式（User Mode）进行二进制插桩。

其工作流程大致如下。
（1）从源代码编译程序时进行插桩，以记录代码覆盖率（Code Coverage）。
（2）选择一些输入文件，作为初始测试集加入输入队列（Queue）。
（3）将队列中的文件按一定的策略进行“突变”。
（4）如果经过变异文件更新了覆盖范围，则将其保留添加到队列中。
（5）上述过程会一直循环进行，期间触发了 crash 的文件会被记录下来。

![image-20250423080827595](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423080827595.png)

## 实验过程

### 一、AFL安装

#### 1.创建文件夹demo1

![image-20250423081015037](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423081015037.png)

#### 2.安装AFL后，用ls /usr/local/bin显示是否正确安装

![image-20250423081132775](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423081132775.png)

### 二、AFL应用

#### 1.创建test.c文件，写入c代码

![image-20250423081341220](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423081341220.png)

#### 2.afl编译test.c

![image-20250423081515897](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423081515897.png)

#### 3.显示test文件里不同作用

![image-20250423081640084](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423081640084.png)

#### 4.创建in和out文件用于输入输出

![image-20250423081915555](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423081915555.png)

#### 5.在in文件夹里增加foo输入信息

![image-20250423081953697](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423081953697.png)

![image-20250423082011946](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423082011946.png)

![image-20250423084248023](C:\Users\he'ye\Desktop\软件安全作业\软件安全实验7.assets\image-20250423084248023.png)



#### 6.应用afl模糊测试

![image-20250423082311916](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423082311916.png)

#### 7.out文件里放crashes

![image-20250423082404426](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423082404426.png)

#### 8.队列里是变异字符

![image-20250423082429408](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423082429408.png)

![image-20250423082449769](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423082449769.png)

#### 9.stage显示过程

![image-20250423082832364](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423082832364.png)

#### 10.如果找到异常显示

![image-20250423082936462](C:\Users\he'ye\AppData\Roaming\Typora\typora-user-images\image-20250423082936462.png)

#### 11.找到crashes

![image-20250423084346318](C:\Users\he'ye\Desktop\软件安全作业\软件安全实验7.assets\image-20250423084346318.png)

#### 12.crashes里存储

![image-20250423084424339](C:\Users\he'ye\Desktop\软件安全作业\软件安全实验7.assets\image-20250423084424339.png)

### 三、理解覆盖引导和文件变异的概念和含义

#### 1.覆盖引导：

覆盖引导（Coverage-Guided）是一种在模糊测试中使用的技术，旨在通过监控程序执行过程中的代码覆盖率来指导测试用例的生成和变异。其核心思想是通过记录输入样本执行时的代码覆盖情况，分析哪些代码路径被覆盖，哪些未被覆盖，然后有针对性地生成新的测试用例，以探索那些尚未被测试到的代码路径，从而提高发现潜在漏洞的概率。

#### 2.文件变异

文件变异是模糊测试中的一个关键步骤，指的是对已有的测试用例进行各种变异操作，如位翻转、算术运算、插入、删除等，以生成新的测试用例。这些变异操作旨在创建多样化的输入，以探索程序的不同执行路径和状态。通过文件变异，可以增加测试的广度和深度，提高发现软件缺陷和安全漏洞的可能性。

## 心得体会

